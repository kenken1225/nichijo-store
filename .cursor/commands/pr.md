# pr: ブランチ作成 → コミット → プッシュ → PR 作成

現在の変更を分析し、ブランチ作成・コミット・プッシュ・PR 作成まで一括で進める。**各ステップでユーザーの確認を取ってから実行すること。**

## 事前に読む Skills

以下 3 つの Skill を必ず読み、ルールに従うこと。

- `.cursor/skills/branch-naming/SKILL.md`
- `.cursor/skills/conventional-commits/SKILL.md`
- `.cursor/skills/pr-template/SKILL.md`

## 手順

### 1. 変更内容の確認

- `git status` で変更ファイルを確認する
- `git diff` で変更内容を確認する（ステージ済み・未ステージ両方）
- 秘密情報（.env など）が含まれていないか確認する

### 2. ブランチ名の提案と作成

- 変更内容から `branch-naming` のルールに沿ったブランチ名を 1 つ提案する
- **ユーザーに確認し、承認されたら** `git checkout -b <ブランチ名>` でブランチを作成する

### 3. ステージングとコミット

- コミット対象のファイルを `git add` でステージする（不要・秘密ファイルは除外）
- `conventional-commits` のルールでコミットメッセージを生成し、**ユーザーに確認してから** `git commit -m "..."` を実行する

### 4. プッシュ

- `git push -u origin <ブランチ名>` でリモートにプッシュする
- 完了したらブランチ名と結果を伝える

### 5. PR の作成

- `pr-template` のルールで PR タイトル・本文（Done / Not To Do / Other）を生成する
- ユーザーがタスク番号を指定していればタイトルに含める
- **ユーザーに内容を確認してから** `gh pr create --title "..." --body-file pr_body.txt` で作成する（本文は一旦 `pr_body.txt` に書き出してから渡す）
- 作成後 `pr_body.txt` を削除し、PR の URL を表示する

## 注意

- 各ステップで「これで実行してよいか」確認を取る。勝手に全部実行しない
- 秘密情報を含むファイルは絶対にコミットしない
- `gh` が未インストールの場合は、PR 本文まで生成し「手動で GitHub から PR を作成してください」と案内する
